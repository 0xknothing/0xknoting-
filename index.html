<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>0xKNOTHING: Black Hole Explorer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏ä‡∏µ‡∏ó‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö --- */
    body {
      margin: 0;
      overflow: hidden; /* ‡∏ã‡πà‡∏≠‡∏ô scroll bars */
      background-color: black;
      font-family: monospace; /* ‡πÉ‡∏ä‡πâ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î */
    }
    #infoBox {
      position: absolute;
      top: 20px;
      left: 20px;
      color: white;
      background: rgba(0, 0, 0, 0.7);
      padding: 15px;
      border-radius: 10px;
      font-size: 16px;
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
  </style>
</head>
<body>
  <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
  <div id="infoBox">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô...</div>

  <script type="module">
    // --- ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ Three.js ---
    import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.162.0/build/three.module.js';
    import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.162.0/examples/jsm/controls/OrbitControls.js';

    // --- 1. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (Scene, Camera, Renderer) ---

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á Scene ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏â‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á
    const scene = new THREE.Scene();

    // ‡πÇ‡∏´‡∏•‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡πÅ‡∏•‡πá‡∏Å‡∏ã‡∏µ
    const loader = new THREE.TextureLoader();
    loader.load(
      'https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/starfield.jpg',
      function(texture) {
        // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
        scene.background = texture;
      },
      undefined, // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö tracking progress (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ)
      function(err) {
        // ‡∏´‡∏≤‡∏Å‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        console.error('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ:', err);
      }
    );

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á Camera ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
    camera.position.z = 25; // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á Renderer ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏î‡∏†‡∏≤‡∏û‡∏•‡∏á‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
    const renderer = new THREE.WebGLRenderer({ antialias: true }); // antialias ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏ö‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement); // ‡∏ô‡∏≥ canvas ‡∏Ç‡∏≠‡∏á renderer ‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô body

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î‡πÅ‡∏™‡∏á
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.2); // ‡πÅ‡∏™‡∏á‡∏£‡∏≠‡∏ö‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á
    scene.add(ambientLight);
    const pointLight = new THREE.PointLight(0xffffff, 1.5, 200); // ‡πÅ‡∏™‡∏á‡∏à‡∏≤‡∏Å‡∏à‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
    pointLight.position.set(10, 10, 30);
    scene.add(pointLight);


    // --- 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÉ‡∏ô‡∏â‡∏≤‡∏Å (Character, Black Hole, Accretion Disk) ---

    // ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£ KNOTHING (‡∏ó‡∏£‡∏á‡∏Å‡∏•‡∏°‡∏™‡∏µ‡∏î‡∏≥)
    const charGeometry = new THREE.SphereGeometry(1, 32, 32);
    const charMaterial = new THREE.MeshStandardMaterial({ color: 0x222222, roughness: 0.5 });
    const character = new THREE.Mesh(charGeometry, charMaterial);
    scene.add(character);

    // ‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥ (‡πÅ‡∏Å‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏™‡∏µ‡∏î‡∏≥‡∏™‡∏ô‡∏¥‡∏ó)
    const blackHoleCore = new THREE.Mesh(
      new THREE.SphereGeometry(3, 64, 64),
      new THREE.MeshBasicMaterial({ color: 0x000000 })
    );
    blackHoleCore.position.set(0, 0, -40); // ‡∏¢‡πâ‡∏≤‡∏¢‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥‡πÑ‡∏õ‡πÑ‡∏Å‡∏•‡∏Ç‡∏∂‡πâ‡∏ô
    scene.add(blackHoleCore);

    // ‡∏à‡∏≤‡∏ô‡∏û‡∏≠‡∏Å‡∏û‡∏π‡∏ô‡∏°‡∏ß‡∏• (Accretion Disk) ‡∏ó‡∏µ‡πà‡∏°‡∏µ Shader ‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©
    const accretionGeometry = new THREE.RingGeometry(3.2, 8, 128);
    const accretionMaterial = new THREE.ShaderMaterial({
      uniforms: {
        time: { value: 0.0 }
      },
      vertexShader: `
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,
      fragmentShader: `
        uniform float time;
        varying vec2 vUv;

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á noise ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢
        float random(vec2 st) {
            return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
        }

        void main() {
            vec2 centeredUv = vUv - 0.5;
            float angle = atan(centeredUv.y, centeredUv.x);
            float radius = length(centeredUv);

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á
            float spiral = angle * 5.0 - time * 2.5 + radius * 2.0;
            float pulse = sin(spiral) * 0.5 + 0.5;

            // ‡πÄ‡∏û‡∏¥‡πà‡∏° noise ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏∂‡πâ‡∏ô
            float noise = random(vUv * time * 0.1) * 0.3;
            float glow = pow(pulse, 10.0) + noise;

            // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ‡πÉ‡∏´‡πâ‡∏£‡πâ‡∏≠‡∏ô‡πÅ‡∏£‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤
            vec3 color = vec3(1.0, 0.4 + sin(time * 0.5) * 0.2, 0.1);
            color *= glow;

            // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏ö‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏á‡∏•‡∏á
            float alpha = smoothstep(0.5, 0.45, radius);

            gl_FragColor = vec4(color, alpha * glow);
        }
      `,
      transparent: true,
      side: THREE.DoubleSide,
      depthWrite: false // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
    });

    const accretionDisk = new THREE.Mesh(accretionGeometry, accretionMaterial);
    accretionDisk.position.copy(blackHoleCore.position); // ‡πÉ‡∏´‡πâ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥
    accretionDisk.rotation.x = Math.PI / 2; // ‡∏´‡∏°‡∏∏‡∏ô‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏â‡∏≤‡∏Å‡∏Å‡∏±‡∏ö‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á
    scene.add(accretionDisk);


    // --- 3. ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß (Physics and Animation) ---

    let velocity = new THREE.Vector3(0, 0, -0.05); // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£
    const gravityCenter = blackHoleCore.position;
    const infoBox = document.getElementById('infoBox');
    const clock = new THREE.Clock();

    function animate() {
      requestAnimationFrame(animate);

      const elapsedTime = clock.getElapsedTime();

      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô Shader ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏à‡∏≤‡∏ô‡∏´‡∏°‡∏∏‡∏ô
      accretionMaterial.uniforms.time.value = elapsedTime;

      // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏Ç‡∏≠‡∏á‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥
      const distance = character.position.distanceTo(gravityCenter);
      const gravityForce = 0.5 / (distance * distance); // ‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á‡∏ï‡∏≤‡∏°‡∏Å‡∏é 1/r^2

      if (distance < 30) { // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏°‡∏µ‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏Å‡∏•‡πâ
        const pullDirection = gravityCenter.clone().sub(character.position).normalize();
        velocity.add(pullDirection.multiplyScalar(gravityForce));

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á
        if (distance < 4) {
          infoBox.innerHTML = 'üåÄ Event Horizon<br>- ‡∏Å‡∏≤‡∏•‡∏≠‡∏ß‡∏Å‡∏≤‡∏®‡∏ö‡∏¥‡∏î‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î<br>- ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏î‡∏´‡∏ô‡∏µ‡∏£‡∏≠‡∏î‡πÑ‡∏î‡πâ';
        } else if (distance < 12) {
          infoBox.innerHTML = 'üî• Accretion Disk<br>- ‡∏û‡∏•‡∏≤‡∏™‡∏°‡∏≤‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á<br>- ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏´‡∏•‡∏≤‡∏¢‡∏•‡πâ‡∏≤‡∏ô‡∏≠‡∏á‡∏®‡∏≤';
        } else {
          infoBox.innerHTML = 'üåå Gravity Well<br>- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÄ‡∏Ç‡∏ï‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏•<br>- ‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á';
        }
      } else {
        infoBox.innerText = '‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏≠‡∏ß‡∏Å‡∏≤‡∏®...';
      }

      //‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
      const maxSpeed = 1.5;
      if (velocity.length() > maxSpeed) {
        velocity.normalize().multiplyScalar(maxSpeed);
      }

      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£
      character.position.add(velocity);

      // ‡∏ß‡∏≤‡∏î‡∏†‡∏≤‡∏û‡∏â‡∏≤‡∏Å
      renderer.render(scene, camera);
      controls.update(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï OrbitControls
    }


    // --- 4. ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á (Controls and Responsiveness) ---

    // ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô OrbitControls ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏°‡∏∏‡∏ô‡∏°‡∏∏‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true; // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏•
    controls.dampingFactor = 0.05;

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Animation Loop
    animate();
  </script>
</body>
</html>
